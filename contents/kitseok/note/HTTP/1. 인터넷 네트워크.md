# 1. 인터넷 네트워크

## 인터넷 통신

메세지를 발송할때

클라이언트 → 인터넷 → 서버 의 구조라면 어떠한 규칙으로 복잡한 인터넷을 지나갈까? 

→ IP를 알아야한다.

## IP(인터넷 프로토콜)

클라이언트(IP: 100.100.100.1) → 인터넷 → 서버(200.200.200.2)일떄

**IP 인터넷 프로토콜의 역할**

- 지정한 IP주소(IP Address)에 데이터 전달
- 패킷(Packet)이라는 통신 단위로 데이터 전달

**IP 패킷 정보(출발지IP, 목적지IP, 기타…)+전송데이터(메세지)**

**클라이언트 패킷 전달**

노드를 따라 목적지IP(200.200.200.2)까지 이동한다.

**서버 패킷 전달**

위와 같은 방식(100.100.100.1 까지 이동한다.)

—인터넷망이 복잡하기 때문에 발송/수신 과정의 경로가 다를 수 있다.

**IP 프로토콜의 한계**

- 비연결성
    - 패킷을 받은 대상이 없거나 서비스 불능 상태여도 패킷 전송
        
        → (대상 서버가 패킷을 받을 수 있는 상태인지 모름)
        
- 비신뢰성
    - 중간에 패킷이 사라지면?
        
        → 중간에 서버가 꺼져버림, 소실
        
    - 패킷이 순서대로 안오면?
        
        → (1) hello, (2) world 순서로 발송했을떄 world가 먼저 발송될 수 있음
        
- 프로그램 구분
    - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면?(게임+노래 동시에)

**위와같은 IP 프로토콜의 한계를 해결해 주는것이 TCP 프로토콜**

### TCP, UDP

### **인터넷 프로토콜 스택의 4계층**

- 애플리케이션 계층 - HTTP, FTP
- 전송계층 - TCP,UDP
- 인터넷 계층 - IP
- 네트워크 인터페이스 계층

**프로토콜 계층**

- 애플리케이션
    - 웹브라우저, 네트워크게임, 채팅프로그램
    - SOCKET 라이브러리
- OS
    - TCP
    - IP
- 네트워크 인터페이스
    - LAN드라이버, LAN장비
1. 프로그램이 메세지 생성
2. SOCKET 라이브러리를 통해 전달
3. TCP정보 생성, 메세지 데이터 포함
4. IP 패킷 생성 TCP데이터 포함
5. LAN 카드를 통해 인터넷→서버 발송

**IP 패킷 정보(패키지와 버킷의 합성어)**

- IP패킷 내부
    - TCP 세그먼트 내부
        
        출발지PORT, 목적지PORT, 전송제어, 순서, 검증정보..
        
        전송데이터
        

### **TCP 특징 - 전송 제어 프로토콜(Transmission Control Protocol)**

- 연결지향 - TCP 3 way handshake (가상 연결)
- 데이터 전달 보증
- 순서 보장
- 신뢰할 수 있는 프로토콜
- 현재는 대부분 TCP 사용

**연결지향 - TCP 3 way handshake (가상 연결)**

1. SYN 메세지 발송 **(클라이언트 → 서버)**
2. SYN+ACK 반환 **(서버 → 클라이언트)**
3. ACK 발송 **(클라이언트 → 서버)**
4. 데이터 전송 **(클라이언트 → 서버)**

→ 서버가 꺼져있으면 1번에서 체크 가능

요즘은 3,4번을 같이 발송하기도함

SYN : 접속 요청
ACK : 요청 수락
참고 : 3. ACK와 함꼐 데이터 전송 가능

**개념적으로만 연결된것임(중간에 거쳐가는 수많은 서버에 연결된지는 모름) 
→ 나를 위한 전용 랜선이 있는게 아님**

**데이터 전달 보증**

1. 데이터 전송 **(클라이언트 → 서버)**
2. 데이터 잘 받았음 **(서버 → 클라이언트)**

→메세지가 잘 전달 되었는지 인지 가능 **(서버 → 클라이언트)**

**순서 보장**

1. 패킷1, 패킷2, 패킷3 순서로 전송 **(클라이언트 → 서버)**
2. 패킷1, 패킷3, 패킷2 순서로 도착 **(클라이언트 → 서버)**
3. 패킷2부터 다시 보내라 **(서버 → 클라이언트)**
    
    **TCP 세그먼트엔 전송 제어, 순서, 검증 정보가 있어서 검증가능**
    

### **UDP 특징 -** 사용자 데이터그램 프로토콜(User Datagram Protocol)

**(TCP와 같은 계층)** 

- 하얀 도화지에 비유(기능이 거의 없음)
- 연결지향 - TCP 3 way handshake X
- 데이터 전달 보증 X
- 순서 보장 X
- 데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠름
- 정리
    - IP와 거의 같다. + PORT + 체크섬 정도만 추가
    - 애플리케이션에서 추가 작업 필요
    
    인터넷은 거의(96%) TCP 기반으로 되어있어서 최적화 불가능
    UDP는 자신이 원하는 것을 애플리케이션 레벨에서 만들어내면 됨
    
    → WEB 브라우저 HTTP3 에서 최적화를 위해 UDP 프로토콜을 사용하며 각광받는중
    
     
    

## PORT

**한번에 둘 이상 연결해야하면?(게임, 화상통화, 웹 브라우저)**

TCP/IP패킷 - 출발지 PORT, 목적지 PORT, 전송데이터….

→ 같은 IP내에서 프로세스를 구분하는것이 PORT 

게임(8080), 화상통화(21000), 웹브라우저(10010)

### 포트정보

- 0 ~ 65535 할당 가능
- 0 ~ 1023 잘 알려진 포트, 사용하지 않는 것이 좋음
    - FTP - 20, 21
    - TELNET - 23
    - HTTP - 80
    - HTTPS - 443

## DNS - 도메인 네임 시스템(Domain Name System)

- 전화번호부
- 도메인 명을 IP 주소로 변환

**IP의 문제점**

- 기억하기 어렵다.
- 변경될 수 있다.

1. 도메인 명 google.com  **(클라이언트  → DNS 서버)**
2. 응답 200.200.200.2  **(DNS 서버 → 클라이언트)**
3. 접속 200.200.200.2  **(클라이언트 → 서버)**
